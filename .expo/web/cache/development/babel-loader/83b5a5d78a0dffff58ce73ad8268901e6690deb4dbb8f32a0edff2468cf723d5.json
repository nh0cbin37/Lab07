{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _common = require(\"@react-native-firebase/app/lib/common\");\nvar _NativeFirebaseError = _interopRequireDefault(require(\"@react-native-firebase/app/lib/internal/NativeFirebaseError\"));\nvar _FirestoreAggregate = require(\"./FirestoreAggregate\");\nvar _FirestoreDocumentSnapshot = _interopRequireDefault(require(\"./FirestoreDocumentSnapshot\"));\nvar _FirestoreFieldPath = _interopRequireWildcard(require(\"./FirestoreFieldPath\"));\nvar _FirestoreQuerySnapshot = _interopRequireDefault(require(\"./FirestoreQuerySnapshot\"));\nvar _utils = require(\"./utils\");\nvar _FirestoreFilter = require(\"./FirestoreFilter\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar _id = 0;\nvar FirestoreQuery = exports.default = function () {\n  function FirestoreQuery(firestore, collectionPath, modifiers, queryName) {\n    (0, _classCallCheck2.default)(this, FirestoreQuery);\n    this._firestore = firestore;\n    this._collectionPath = collectionPath;\n    this._modifiers = modifiers;\n    this._queryName = queryName;\n  }\n  (0, _createClass2.default)(FirestoreQuery, [{\n    key: \"firestore\",\n    get: function get() {\n      return this._firestore;\n    }\n  }, {\n    key: \"_handleQueryCursor\",\n    value: function _handleQueryCursor(cursor, docOrField, fields) {\n      var modifiers = this._modifiers._copy();\n      if ((0, _common.isUndefined)(docOrField)) {\n        throw new Error(`firebase.firestore().collection().${cursor}(*) Expected a DocumentSnapshot or list of field values but got undefined.`);\n      }\n      if (docOrField instanceof _FirestoreDocumentSnapshot.default) {\n        if (fields.length > 0) {\n          throw new Error(`firebase.firestore().collection().${cursor}(*) Too many arguments provided. Expected DocumentSnapshot or list of field values.`);\n        }\n        var documentSnapshot = docOrField;\n        if (!documentSnapshot.exists) {\n          throw new Error(`firebase.firestore().collection().${cursor}(*) Can't use a DocumentSnapshot that doesn't exist.`);\n        }\n        var currentOrders = modifiers.orders;\n        var values = [];\n        for (var i = 0; i < currentOrders.length; i++) {\n          var order = currentOrders[i];\n          if (order.fieldPath === '__name__') {\n            continue;\n          }\n          var value = documentSnapshot.get(order.fieldPath);\n          if (value === undefined) {\n            throw new Error(`firebase.firestore().collection().${cursor}(*) You are trying to start or end a query using a document for which the field '${order.fieldPath}' (used as the orderBy) does not exist.`);\n          }\n          values.push(value);\n        }\n        if (modifiers._orders.length) {\n          var lastOrder = modifiers._orders[modifiers._orders.length - 1];\n          if (lastOrder.fieldPath !== '__name__') {\n            modifiers._orders.push({\n              fieldPath: '__name__',\n              direction: lastOrder.direction\n            });\n          }\n        } else {\n          modifiers._orders.push({\n            fieldPath: '__name__',\n            direction: 'ASCENDING'\n          });\n        }\n        if (this._modifiers.isCollectionGroupQuery()) {\n          values.push(documentSnapshot.ref.path);\n        } else {\n          values.push(documentSnapshot.id);\n        }\n        return modifiers.setFieldsCursor(cursor, values);\n      }\n      var allFields = [docOrField].concat(fields);\n      if (allFields.length > modifiers.orders.length) {\n        throw new Error(`firebase.firestore().collection().${cursor}(*) Too many arguments provided. The number of arguments must be less than or equal to the number of orderBy() clauses.`);\n      }\n      return modifiers.setFieldsCursor(cursor, allFields);\n    }\n  }, {\n    key: \"count\",\n    value: function count() {\n      return new _FirestoreAggregate.FirestoreAggregateQuery(this._firestore, this, this._collectionPath, this._modifiers);\n    }\n  }, {\n    key: \"countFromServer\",\n    value: function countFromServer() {\n      return this.count();\n    }\n  }, {\n    key: \"endAt\",\n    value: function endAt(docOrField) {\n      for (var _len = arguments.length, fields = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        fields[_key - 1] = arguments[_key];\n      }\n      return new FirestoreQuery(this._firestore, this._collectionPath, this._handleQueryCursor('endAt', docOrField, fields), this._queryName);\n    }\n  }, {\n    key: \"endBefore\",\n    value: function endBefore(docOrField) {\n      for (var _len2 = arguments.length, fields = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        fields[_key2 - 1] = arguments[_key2];\n      }\n      return new FirestoreQuery(this._firestore, this._collectionPath, this._handleQueryCursor('endBefore', docOrField, fields), this._queryName);\n    }\n  }, {\n    key: \"get\",\n    value: function get(options) {\n      var _this = this;\n      if (!(0, _common.isUndefined)(options) && !(0, _common.isObject)(options)) {\n        throw new Error(\"firebase.firestore().collection().get(*) 'options' must be an object is provided.\");\n      }\n      if (options && options.source && options.source !== 'default' && options.source !== 'server' && options.source !== 'cache') {\n        throw new Error(\"firebase.firestore().collection().get(*) 'options' GetOptions.source must be one of 'default', 'server' or 'cache'.\");\n      }\n      if (!(0, _common.isUndefined)(this._queryName)) {\n        return this._firestore.native.namedQueryGet(this._queryName, this._modifiers.type, this._modifiers.filters, this._modifiers.orders, this._modifiers.options, options).then(function (data) {\n          return new _FirestoreQuerySnapshot.default(_this._firestore, _this, data);\n        });\n      }\n      this._modifiers.validatelimitToLast();\n      return this._firestore.native.collectionGet(this._collectionPath.relativeName, this._modifiers.type, this._modifiers.filters, this._modifiers.orders, this._modifiers.options, options).then(function (data) {\n        return new _FirestoreQuerySnapshot.default(_this._firestore, _this, data);\n      });\n    }\n  }, {\n    key: \"isEqual\",\n    value: function isEqual(other) {\n      if (!(other instanceof FirestoreQuery)) {\n        throw new Error(\"firebase.firestore().collection().isEqual(*) 'other' expected a Query instance.\");\n      }\n      if (this.firestore.app.name !== other.firestore.app.name || this._modifiers.type !== other._modifiers.type || this._modifiers.filters.length !== other._modifiers.filters.length || this._modifiers.orders.length !== other._modifiers.orders.length || this._collectionPath.relativeName !== other._collectionPath.relativeName || Object.keys(this._modifiers.options).length !== Object.keys(other._modifiers.options).length) {\n        return false;\n      }\n      if (JSON.stringify(this._modifiers.filters) !== JSON.stringify(other._modifiers.filters) || JSON.stringify(this._modifiers.orders) !== JSON.stringify(other._modifiers.orders) || JSON.stringify(this._modifiers.options) !== JSON.stringify(other._modifiers.options)) {\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: \"limit\",\n    value: function limit(_limit) {\n      if (this._modifiers.isValidLimit(_limit)) {\n        throw new Error(\"firebase.firestore().collection().limit(*) 'limit' must be a positive integer value.\");\n      }\n      var modifiers = this._modifiers._copy().limit(_limit);\n      return new FirestoreQuery(this._firestore, this._collectionPath, modifiers, this._queryName);\n    }\n  }, {\n    key: \"limitToLast\",\n    value: function limitToLast(_limitToLast) {\n      if (this._modifiers.isValidLimitToLast(_limitToLast)) {\n        throw new Error(\"firebase.firestore().collection().limitToLast(*) 'limitToLast' must be a positive integer value.\");\n      }\n      var modifiers = this._modifiers._copy().limitToLast(_limitToLast);\n      return new FirestoreQuery(this._firestore, this._collectionPath, modifiers, this._queryName);\n    }\n  }, {\n    key: \"onSnapshot\",\n    value: function onSnapshot() {\n      var _this2 = this;\n      var snapshotListenOptions;\n      var callback;\n      var onNext;\n      var onError;\n      this._modifiers.validatelimitToLast();\n      try {\n        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n        var options = (0, _utils.parseSnapshotArgs)(args);\n        snapshotListenOptions = options.snapshotListenOptions;\n        callback = options.callback;\n        onNext = options.onNext;\n        onError = options.onError;\n      } catch (e) {\n        throw new Error(`firebase.firestore().collection().onSnapshot(*) ${e.message}`);\n      }\n      function handleSuccess(querySnapshot) {\n        callback(querySnapshot, null);\n        onNext(querySnapshot);\n      }\n      function handleError(error) {\n        callback(null, error);\n        onError(error);\n      }\n      var listenerId = _id++;\n      var onSnapshotSubscription = this._firestore.emitter.addListener(this._firestore.eventNameForApp(`firestore_collection_sync_event:${listenerId}`), function (event) {\n        if (event.body.error) {\n          handleError(_NativeFirebaseError.default.fromEvent(event.body.error, 'firestore'));\n        } else {\n          var querySnapshot = new _FirestoreQuerySnapshot.default(_this2._firestore, _this2, event.body.snapshot);\n          handleSuccess(querySnapshot);\n        }\n      });\n      var unsubscribe = function unsubscribe() {\n        onSnapshotSubscription.remove();\n        _this2._firestore.native.collectionOffSnapshot(listenerId);\n      };\n      if (!(0, _common.isUndefined)(this._queryName)) {\n        this._firestore.native.namedQueryOnSnapshot(this._queryName, this._modifiers.type, this._modifiers.filters, this._modifiers.orders, this._modifiers.options, listenerId, snapshotListenOptions);\n      } else {\n        this._firestore.native.collectionOnSnapshot(this._collectionPath.relativeName, this._modifiers.type, this._modifiers.filters, this._modifiers.orders, this._modifiers.options, listenerId, snapshotListenOptions);\n      }\n      return unsubscribe;\n    }\n  }, {\n    key: \"orderBy\",\n    value: function orderBy(fieldPath, directionStr) {\n      if (!(0, _common.isString)(fieldPath) && !(fieldPath instanceof _FirestoreFieldPath.default)) {\n        throw new Error(\"firebase.firestore().collection().orderBy(*) 'fieldPath' must be a string or instance of FieldPath.\");\n      }\n      var path;\n      if ((0, _common.isString)(fieldPath)) {\n        try {\n          path = (0, _FirestoreFieldPath.fromDotSeparatedString)(fieldPath);\n        } catch (e) {\n          throw new Error(`firebase.firestore().collection().orderBy(*) 'fieldPath' ${e.message}.`);\n        }\n      } else {\n        path = fieldPath;\n      }\n      if (!(0, _common.isUndefined)(directionStr) && !this._modifiers.isValidDirection(directionStr)) {\n        throw new Error(\"firebase.firestore().collection().orderBy(_, *) 'directionStr' must be one of 'asc' or 'desc'.\");\n      }\n      if (this._modifiers.hasStart()) {\n        throw new Error('firebase.firestore().collection().orderBy() Invalid query. You must not call startAt() or startAfter() before calling orderBy().');\n      }\n      if (this._modifiers.hasEnd()) {\n        throw new Error('firebase.firestore().collection().orderBy() Invalid query. You must not call endAt() or endBefore() before calling orderBy().');\n      }\n      var modifiers = this._modifiers._copy().orderBy(path, directionStr);\n      try {\n        modifiers.validateOrderBy();\n      } catch (e) {\n        throw new Error(`firebase.firestore().collection().orderBy() ${e.message}`);\n      }\n      return new FirestoreQuery(this._firestore, this._collectionPath, modifiers, this._queryName);\n    }\n  }, {\n    key: \"startAfter\",\n    value: function startAfter(docOrField) {\n      for (var _len4 = arguments.length, fields = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        fields[_key4 - 1] = arguments[_key4];\n      }\n      return new FirestoreQuery(this._firestore, this._collectionPath, this._handleQueryCursor('startAfter', docOrField, fields), this._queryName);\n    }\n  }, {\n    key: \"startAt\",\n    value: function startAt(docOrField) {\n      for (var _len5 = arguments.length, fields = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n        fields[_key5 - 1] = arguments[_key5];\n      }\n      return new FirestoreQuery(this._firestore, this._collectionPath, this._handleQueryCursor('startAt', docOrField, fields), this._queryName);\n    }\n  }, {\n    key: \"where\",\n    value: function where(fieldPathOrFilter, opStr, value) {\n      if (!(0, _common.isString)(fieldPathOrFilter) && !(fieldPathOrFilter instanceof _FirestoreFieldPath.default) && !(fieldPathOrFilter instanceof _FirestoreFilter._Filter)) {\n        throw new Error(\"firebase.firestore().collection().where(*) 'fieldPath' must be a string, instance of FieldPath or instance of Filter.\");\n      }\n      var modifiers;\n      if (fieldPathOrFilter instanceof _FirestoreFilter._Filter && fieldPathOrFilter.queries) {\n        var filters = (0, _FirestoreFilter.generateFilters)(fieldPathOrFilter, this._modifiers);\n        modifiers = this._modifiers._copy().filterWhere(filters);\n      } else {\n        if (fieldPathOrFilter instanceof _FirestoreFilter._Filter) {\n          opStr = fieldPathOrFilter.operator;\n          value = fieldPathOrFilter.value;\n          fieldPathOrFilter = fieldPathOrFilter.fieldPath;\n        }\n        var path;\n        if ((0, _common.isString)(fieldPathOrFilter)) {\n          try {\n            path = (0, _FirestoreFieldPath.fromDotSeparatedString)(fieldPathOrFilter);\n          } catch (e) {\n            throw new Error(`firebase.firestore().collection().where(*) 'fieldPath' ${e.message}.`);\n          }\n        } else {\n          path = fieldPathOrFilter;\n        }\n        if (!this._modifiers.isValidOperator(opStr)) {\n          throw new Error(\"firebase.firestore().collection().where(_, *) 'opStr' is invalid. Expected one of '==', '>', '>=', '<', '<=', '!=', 'array-contains', 'not-in', 'array-contains-any' or 'in'.\");\n        }\n        if ((0, _common.isUndefined)(value)) {\n          throw new Error(\"firebase.firestore().collection().where(_, _, *) 'value' argument expected.\");\n        }\n        if ((0, _common.isNull)(value) && !this._modifiers.isEqualOperator(opStr) && !this._modifiers.isNotEqualOperator(opStr)) {\n          throw new Error(\"firebase.firestore().collection().where(_, _, *) 'value' is invalid. You can only perform equals comparisons on null\");\n        }\n        if (this._modifiers.isInOperator(opStr)) {\n          if (!(0, _common.isArray)(value) || !value.length) {\n            throw new Error(`firebase.firestore().collection().where(_, _, *) 'value' is invalid. A non-empty array is required for '${opStr}' filters.`);\n          }\n          if (value.length > 10) {\n            throw new Error(`firebase.firestore().collection().where(_, _, *) 'value' is invalid. '${opStr}' filters support a maximum of 10 elements in the value array.`);\n          }\n        }\n        modifiers = this._modifiers._copy().where(path, opStr, value);\n      }\n      try {\n        modifiers.validateWhere();\n      } catch (e) {\n        throw new Error(`firebase.firestore().collection().where() ${e.message}`);\n      }\n      return new FirestoreQuery(this._firestore, this._collectionPath, modifiers, this._queryName);\n    }\n  }]);\n  return FirestoreQuery;\n}();","map":{"version":3,"names":["_common","require","_NativeFirebaseError","_interopRequireDefault","_FirestoreAggregate","_FirestoreDocumentSnapshot","_FirestoreFieldPath","_interopRequireWildcard","_FirestoreQuerySnapshot","_utils","_FirestoreFilter","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_id","FirestoreQuery","exports","firestore","collectionPath","modifiers","queryName","_classCallCheck2","_firestore","_collectionPath","_modifiers","_queryName","_createClass2","value","_handleQueryCursor","cursor","docOrField","fields","_copy","isUndefined","Error","FirestoreDocumentSnapshot","length","documentSnapshot","exists","currentOrders","orders","values","i","order","fieldPath","undefined","push","_orders","lastOrder","direction","isCollectionGroupQuery","ref","path","id","setFieldsCursor","allFields","concat","count","FirestoreAggregateQuery","countFromServer","endAt","_len","arguments","Array","_key","endBefore","_len2","_key2","options","_this","isObject","source","native","namedQueryGet","type","filters","then","data","FirestoreQuerySnapshot","validatelimitToLast","collectionGet","relativeName","isEqual","other","app","name","keys","JSON","stringify","limit","isValidLimit","limitToLast","isValidLimitToLast","onSnapshot","_this2","snapshotListenOptions","callback","onNext","onError","_len3","args","_key3","parseSnapshotArgs","e","message","handleSuccess","querySnapshot","handleError","error","listenerId","onSnapshotSubscription","emitter","addListener","eventNameForApp","event","body","NativeError","fromEvent","snapshot","unsubscribe","remove","collectionOffSnapshot","namedQueryOnSnapshot","collectionOnSnapshot","orderBy","directionStr","isString","FirestoreFieldPath","fromDotSeparatedString","isValidDirection","hasStart","hasEnd","validateOrderBy","startAfter","_len4","_key4","startAt","_len5","_key5","where","fieldPathOrFilter","opStr","_Filter","queries","generateFilters","filterWhere","operator","isValidOperator","isNull","isEqualOperator","isNotEqualOperator","isInOperator","isArray","validateWhere"],"sources":["C:/ReactNative/DemoFireBase/node_modules/@react-native-firebase/firestore/lib/FirestoreQuery.js"],"sourcesContent":["/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {\n  isArray,\n  isNull,\n  isObject,\n  isString,\n  isUndefined,\n} from '@react-native-firebase/app/lib/common';\nimport NativeError from '@react-native-firebase/app/lib/internal/NativeFirebaseError';\nimport { FirestoreAggregateQuery } from './FirestoreAggregate';\nimport FirestoreDocumentSnapshot from './FirestoreDocumentSnapshot';\nimport FirestoreFieldPath, { fromDotSeparatedString } from './FirestoreFieldPath';\nimport FirestoreQuerySnapshot from './FirestoreQuerySnapshot';\nimport { parseSnapshotArgs } from './utils';\nimport { _Filter, generateFilters } from './FirestoreFilter';\n\nlet _id = 0;\n\nexport default class FirestoreQuery {\n  constructor(firestore, collectionPath, modifiers, queryName) {\n    this._firestore = firestore;\n    this._collectionPath = collectionPath;\n    this._modifiers = modifiers;\n    this._queryName = queryName;\n  }\n\n  get firestore() {\n    return this._firestore;\n  }\n\n  _handleQueryCursor(cursor, docOrField, fields) {\n    const modifiers = this._modifiers._copy();\n\n    if (isUndefined(docOrField)) {\n      throw new Error(\n        `firebase.firestore().collection().${cursor}(*) Expected a DocumentSnapshot or list of field values but got undefined.`,\n      );\n    }\n\n    // Handles cases where the first arg is a DocumentSnapshot\n    if (docOrField instanceof FirestoreDocumentSnapshot) {\n      if (fields.length > 0) {\n        throw new Error(\n          `firebase.firestore().collection().${cursor}(*) Too many arguments provided. Expected DocumentSnapshot or list of field values.`,\n        );\n      }\n\n      const documentSnapshot = docOrField;\n\n      if (!documentSnapshot.exists) {\n        throw new Error(\n          `firebase.firestore().collection().${cursor}(*) Can't use a DocumentSnapshot that doesn't exist.`,\n        );\n      }\n\n      const currentOrders = modifiers.orders;\n\n      const values = [];\n\n      for (let i = 0; i < currentOrders.length; i++) {\n        const order = currentOrders[i];\n        //skip if fieldPath is '__name__'\n        if (order.fieldPath === '__name__') {\n          continue;\n        }\n\n        const value = documentSnapshot.get(order.fieldPath);\n\n        if (value === undefined) {\n          throw new Error(\n            `firebase.firestore().collection().${cursor}(*) You are trying to start or end a query using a document for which the field '${order.fieldPath}' (used as the orderBy) does not exist.`,\n          );\n        }\n\n        values.push(value);\n      }\n\n      // Based on https://github.com/invertase/react-native-firebase/issues/2854#issuecomment-552986650\n      if (modifiers._orders.length) {\n        const lastOrder = modifiers._orders[modifiers._orders.length - 1];\n        //push '__name__' field only if not present already\n        if (lastOrder.fieldPath !== '__name__') {\n          modifiers._orders.push({\n            fieldPath: '__name__',\n            direction: lastOrder.direction,\n          });\n        }\n      } else {\n        modifiers._orders.push({\n          fieldPath: '__name__',\n          direction: 'ASCENDING',\n        });\n      }\n\n      if (this._modifiers.isCollectionGroupQuery()) {\n        values.push(documentSnapshot.ref.path);\n      } else {\n        values.push(documentSnapshot.id);\n      }\n\n      return modifiers.setFieldsCursor(cursor, values);\n    }\n\n    /**\n     * Assumes list of field values to query by. Orders must be of equal length.\n     */\n\n    const allFields = [docOrField].concat(fields);\n\n    if (allFields.length > modifiers.orders.length) {\n      throw new Error(\n        `firebase.firestore().collection().${cursor}(*) Too many arguments provided. The number of arguments must be less than or equal to the number of orderBy() clauses.`,\n      );\n    }\n\n    return modifiers.setFieldsCursor(cursor, allFields);\n  }\n\n  count() {\n    return new FirestoreAggregateQuery(\n      this._firestore,\n      this,\n      this._collectionPath,\n      this._modifiers,\n    );\n  }\n\n  countFromServer() {\n    return this.count();\n  }\n\n  endAt(docOrField, ...fields) {\n    return new FirestoreQuery(\n      this._firestore,\n      this._collectionPath,\n      this._handleQueryCursor('endAt', docOrField, fields),\n      this._queryName,\n    );\n  }\n\n  endBefore(docOrField, ...fields) {\n    return new FirestoreQuery(\n      this._firestore,\n      this._collectionPath,\n      this._handleQueryCursor('endBefore', docOrField, fields),\n      this._queryName,\n    );\n  }\n\n  get(options) {\n    if (!isUndefined(options) && !isObject(options)) {\n      throw new Error(\n        \"firebase.firestore().collection().get(*) 'options' must be an object is provided.\",\n      );\n    }\n\n    if (\n      options &&\n      options.source &&\n      options.source !== 'default' &&\n      options.source !== 'server' &&\n      options.source !== 'cache'\n    ) {\n      throw new Error(\n        \"firebase.firestore().collection().get(*) 'options' GetOptions.source must be one of 'default', 'server' or 'cache'.\",\n      );\n    }\n\n    if (!isUndefined(this._queryName)) {\n      return this._firestore.native\n        .namedQueryGet(\n          this._queryName,\n          this._modifiers.type,\n          this._modifiers.filters,\n          this._modifiers.orders,\n          this._modifiers.options,\n          options,\n        )\n        .then(data => new FirestoreQuerySnapshot(this._firestore, this, data));\n    }\n\n    this._modifiers.validatelimitToLast();\n\n    return this._firestore.native\n      .collectionGet(\n        this._collectionPath.relativeName,\n        this._modifiers.type,\n        this._modifiers.filters,\n        this._modifiers.orders,\n        this._modifiers.options,\n        options,\n      )\n      .then(data => new FirestoreQuerySnapshot(this._firestore, this, data));\n  }\n\n  isEqual(other) {\n    if (!(other instanceof FirestoreQuery)) {\n      throw new Error(\n        \"firebase.firestore().collection().isEqual(*) 'other' expected a Query instance.\",\n      );\n    }\n\n    // Carry out lightweight checks first\n    if (\n      this.firestore.app.name !== other.firestore.app.name ||\n      this._modifiers.type !== other._modifiers.type ||\n      this._modifiers.filters.length !== other._modifiers.filters.length ||\n      this._modifiers.orders.length !== other._modifiers.orders.length ||\n      this._collectionPath.relativeName !== other._collectionPath.relativeName ||\n      Object.keys(this._modifiers.options).length !== Object.keys(other._modifiers.options).length\n    ) {\n      return false;\n    }\n\n    // Carry out potentially expensive checks\n    // noinspection RedundantIfStatementJS\n    if (\n      JSON.stringify(this._modifiers.filters) !== JSON.stringify(other._modifiers.filters) ||\n      JSON.stringify(this._modifiers.orders) !== JSON.stringify(other._modifiers.orders) ||\n      JSON.stringify(this._modifiers.options) !== JSON.stringify(other._modifiers.options)\n    ) {\n      return false;\n    }\n\n    return true;\n  }\n\n  limit(limit) {\n    if (this._modifiers.isValidLimit(limit)) {\n      throw new Error(\n        \"firebase.firestore().collection().limit(*) 'limit' must be a positive integer value.\",\n      );\n    }\n\n    const modifiers = this._modifiers._copy().limit(limit);\n\n    return new FirestoreQuery(this._firestore, this._collectionPath, modifiers, this._queryName);\n  }\n\n  limitToLast(limitToLast) {\n    if (this._modifiers.isValidLimitToLast(limitToLast)) {\n      throw new Error(\n        \"firebase.firestore().collection().limitToLast(*) 'limitToLast' must be a positive integer value.\",\n      );\n    }\n\n    const modifiers = this._modifiers._copy().limitToLast(limitToLast);\n\n    return new FirestoreQuery(this._firestore, this._collectionPath, modifiers, this._queryName);\n  }\n\n  onSnapshot(...args) {\n    let snapshotListenOptions;\n    let callback;\n    let onNext;\n    let onError;\n\n    this._modifiers.validatelimitToLast();\n\n    try {\n      const options = parseSnapshotArgs(args);\n      snapshotListenOptions = options.snapshotListenOptions;\n      callback = options.callback;\n      onNext = options.onNext;\n      onError = options.onError;\n    } catch (e) {\n      throw new Error(`firebase.firestore().collection().onSnapshot(*) ${e.message}`);\n    }\n\n    function handleSuccess(querySnapshot) {\n      callback(querySnapshot, null);\n      onNext(querySnapshot);\n    }\n\n    function handleError(error) {\n      callback(null, error);\n      onError(error);\n    }\n\n    const listenerId = _id++;\n\n    const onSnapshotSubscription = this._firestore.emitter.addListener(\n      this._firestore.eventNameForApp(`firestore_collection_sync_event:${listenerId}`),\n      event => {\n        if (event.body.error) {\n          handleError(NativeError.fromEvent(event.body.error, 'firestore'));\n        } else {\n          const querySnapshot = new FirestoreQuerySnapshot(\n            this._firestore,\n            this,\n            event.body.snapshot,\n          );\n          handleSuccess(querySnapshot);\n        }\n      },\n    );\n\n    const unsubscribe = () => {\n      onSnapshotSubscription.remove();\n      this._firestore.native.collectionOffSnapshot(listenerId);\n    };\n\n    if (!isUndefined(this._queryName)) {\n      this._firestore.native.namedQueryOnSnapshot(\n        this._queryName,\n        this._modifiers.type,\n        this._modifiers.filters,\n        this._modifiers.orders,\n        this._modifiers.options,\n        listenerId,\n        snapshotListenOptions,\n      );\n    } else {\n      this._firestore.native.collectionOnSnapshot(\n        this._collectionPath.relativeName,\n        this._modifiers.type,\n        this._modifiers.filters,\n        this._modifiers.orders,\n        this._modifiers.options,\n        listenerId,\n        snapshotListenOptions,\n      );\n    }\n\n    return unsubscribe;\n  }\n\n  orderBy(fieldPath, directionStr) {\n    if (!isString(fieldPath) && !(fieldPath instanceof FirestoreFieldPath)) {\n      throw new Error(\n        \"firebase.firestore().collection().orderBy(*) 'fieldPath' must be a string or instance of FieldPath.\",\n      );\n    }\n\n    let path;\n\n    if (isString(fieldPath)) {\n      try {\n        path = fromDotSeparatedString(fieldPath);\n      } catch (e) {\n        throw new Error(`firebase.firestore().collection().orderBy(*) 'fieldPath' ${e.message}.`);\n      }\n    } else {\n      path = fieldPath;\n    }\n\n    if (!isUndefined(directionStr) && !this._modifiers.isValidDirection(directionStr)) {\n      throw new Error(\n        \"firebase.firestore().collection().orderBy(_, *) 'directionStr' must be one of 'asc' or 'desc'.\",\n      );\n    }\n\n    if (this._modifiers.hasStart()) {\n      throw new Error(\n        'firebase.firestore().collection().orderBy() Invalid query. You must not call startAt() or startAfter() before calling orderBy().',\n      );\n    }\n\n    if (this._modifiers.hasEnd()) {\n      throw new Error(\n        'firebase.firestore().collection().orderBy() Invalid query. You must not call endAt() or endBefore() before calling orderBy().',\n      );\n    }\n\n    const modifiers = this._modifiers._copy().orderBy(path, directionStr);\n\n    try {\n      modifiers.validateOrderBy();\n    } catch (e) {\n      throw new Error(`firebase.firestore().collection().orderBy() ${e.message}`);\n    }\n\n    return new FirestoreQuery(this._firestore, this._collectionPath, modifiers, this._queryName);\n  }\n\n  startAfter(docOrField, ...fields) {\n    return new FirestoreQuery(\n      this._firestore,\n      this._collectionPath,\n      this._handleQueryCursor('startAfter', docOrField, fields),\n      this._queryName,\n    );\n  }\n\n  startAt(docOrField, ...fields) {\n    return new FirestoreQuery(\n      this._firestore,\n      this._collectionPath,\n      this._handleQueryCursor('startAt', docOrField, fields),\n      this._queryName,\n    );\n  }\n\n  where(fieldPathOrFilter, opStr, value) {\n    if (\n      !isString(fieldPathOrFilter) &&\n      !(fieldPathOrFilter instanceof FirestoreFieldPath) &&\n      !(fieldPathOrFilter instanceof _Filter)\n    ) {\n      throw new Error(\n        \"firebase.firestore().collection().where(*) 'fieldPath' must be a string, instance of FieldPath or instance of Filter.\",\n      );\n    }\n\n    let modifiers;\n    if (fieldPathOrFilter instanceof _Filter && fieldPathOrFilter.queries) {\n      //AND or OR filter\n      const filters = generateFilters(fieldPathOrFilter, this._modifiers);\n      modifiers = this._modifiers._copy().filterWhere(filters);\n    } else {\n      if (fieldPathOrFilter instanceof _Filter) {\n        // Standard Filter. Usual path.\n        opStr = fieldPathOrFilter.operator;\n        value = fieldPathOrFilter.value;\n        fieldPathOrFilter = fieldPathOrFilter.fieldPath;\n      }\n      let path;\n\n      if (isString(fieldPathOrFilter)) {\n        try {\n          path = fromDotSeparatedString(fieldPathOrFilter);\n        } catch (e) {\n          throw new Error(`firebase.firestore().collection().where(*) 'fieldPath' ${e.message}.`);\n        }\n      } else {\n        path = fieldPathOrFilter;\n      }\n\n      if (!this._modifiers.isValidOperator(opStr)) {\n        throw new Error(\n          \"firebase.firestore().collection().where(_, *) 'opStr' is invalid. Expected one of '==', '>', '>=', '<', '<=', '!=', 'array-contains', 'not-in', 'array-contains-any' or 'in'.\",\n        );\n      }\n\n      if (isUndefined(value)) {\n        throw new Error(\n          \"firebase.firestore().collection().where(_, _, *) 'value' argument expected.\",\n        );\n      }\n\n      if (\n        isNull(value) &&\n        !this._modifiers.isEqualOperator(opStr) &&\n        !this._modifiers.isNotEqualOperator(opStr)\n      ) {\n        throw new Error(\n          \"firebase.firestore().collection().where(_, _, *) 'value' is invalid. You can only perform equals comparisons on null\",\n        );\n      }\n\n      if (this._modifiers.isInOperator(opStr)) {\n        if (!isArray(value) || !value.length) {\n          throw new Error(\n            `firebase.firestore().collection().where(_, _, *) 'value' is invalid. A non-empty array is required for '${opStr}' filters.`,\n          );\n        }\n\n        if (value.length > 10) {\n          throw new Error(\n            `firebase.firestore().collection().where(_, _, *) 'value' is invalid. '${opStr}' filters support a maximum of 10 elements in the value array.`,\n          );\n        }\n      }\n\n      modifiers = this._modifiers._copy().where(path, opStr, value);\n    }\n\n    try {\n      modifiers.validateWhere();\n    } catch (e) {\n      throw new Error(`firebase.firestore().collection().where() ${e.message}`);\n    }\n\n    return new FirestoreQuery(this._firestore, this._collectionPath, modifiers, this._queryName);\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}